import { makeTypedQueryFactory as $mkFactory } from "../runtime/edge.js"
export const importsWithMatchingVehicle = /*#__PURE__*/ $mkFactory("WITH\nmatched_imports AS (\nSELECT DISTINCT\ni.pcv\nFROM\nimports i\nJOIN registrations r ON i.pcv = r.pcv\nWHERE\n(\ni.country = $3\nOR $3 IS NULL\n) -- Optional country filter\nORDER BY\ni.pcv -- Ensure deterministic ordering for pagination\nLIMIT\n$1\nOFFSET\n$2\n)\nSELECT\n'imports' AS source,\ni.pcv,\ni.id\nFROM\nimports i\nWHERE\ni.pcv IN (\nSELECT\npcv\nFROM\nmatched_imports\n)\nUNION ALL\nSELECT\n'registrations' AS source,\nr.pcv,\nr.id\nFROM\nregistrations r\nWHERE\nr.pcv IN (\nSELECT\npcv\nFROM\nmatched_imports\n);")
